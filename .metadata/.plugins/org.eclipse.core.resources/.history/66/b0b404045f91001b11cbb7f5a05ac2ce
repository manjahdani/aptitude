/** 
 * 
 */
package be.uclouvain.aptitude.agents.algorithm

import be.uclouvain.aptitude.agents.algorithm.PythonTwinAlgorithm
import be.uclouvain.aptitude.agents.algorithm.messages.BaseMessage
import io.sarl.core.Logging

/** 
 * @author manjah
 * 
 */
abstract skill PythonAccess implements PythonTwinAlgorithm {
	uses Logging

	def install {
		// Function invoked when the skill is installed in the owner.
		// You should put all the initialization statements in this block of code.
		info("Installing the skill")
	}

	def prepareUninstallation {
		// Function invoked when the skill is preparing to be uninstalled from the owner, but before the owner is destroyed.
		// You should put all the resource release statements that should be executed before the owner is destroyed.
		info("Preparing the uninstallation of the skill")
	}

	def uninstall {
		// Function invoked when the skill is uninstalled from the owner, and after the owner is destroyed.
		// You should put all the resource release statements in this block of code.
		info("Uninstalling the skill")
	}

	def enableDataAcquisition(o : Object) {

		var jsonConfig = o as JSONObject
		this.pendingRequestID = UuidUtil.newSecureUuidString
		this.requestTask = every(1000) [
			print("Tracking partner not found, send discovery message")
			var requestMessage = new RequestMessage()
			requestMessage.requestID = this.pendingRequestID
			requestMessage.agentID = owner.ID.toString
			requestMessage.jsonConfig = jsonConfig.toString
			CommunicationManager.instance.publishMessage(topicRequestSub, requestMessage)
		]
	}

	override update(m : BaseMessage) {
		// TODO Auto-generated code.
	}

	override disableDataAcquisition(o : Object) {
		// TODO Auto-generated code.
	}
}
