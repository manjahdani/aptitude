/** 
 * 
 */
package be.uclouvain.aptitude.surveillance.ui

import be.uclouvain.organisation.interactivity.inputDevice.InputDeviceCapacity
import be.uclouvain.organisation.interactivity.inputDevice.InputDeviceRole
import io.sarl.core.Initialize
import io.sarl.core.Logging
import io.sarl.lang.core.EventSpace
import java.util.TreeMap
import java.util.UUID
import io.sarl.core.Behaviors
import be.uclouvain.organisation.interactivity.outputDevice.OutputDeviceRole
import be.uclouvain.organisation.interactivity.outputDevice.OutputDeviceCapacity
import be.uclouvain.aptitude.surveillance.Paraddis
import io.sarl.core.Destroy
import be.uclouvain.aptitude.surveillance.CommitSuicide
import io.sarl.core.Lifecycle
import io.sarl.lang.core.Behavior

/** 
 * @author manjah
 * 
 */
agent UserInterface {
	uses Logging, Behaviors,Lifecycle
	
	var a : Behavior
	var b : Behavior
	on Initialize {
		loggingName = "UserInterface-" + this.ID
		info("Ready to receive external inputs")
		
		val s = setSkill(new DeviceNetworkManagerSkill(65001, occurrence.parameters.get(0) as TreeMap<UUID, EventSpace>),
					InputDeviceCapacity)
		a = registerBehavior(new InputDeviceRole(this))
		info("I uninstalled -------------------B")
		info(clearSkill(InputDeviceCapacity))
		var m = new TreeMap<UUID, String>
		info("------------------------- Installing A")
		//setSkill(new MobileOutputSkill(s.getMobileAddress), OutputDeviceCapacity)
		//setSkill(new MobileOutputSkill(m), OutputDeviceCapacity)
		info("------------------------- Installing B")
		//b = registerBehavior(new OutputDeviceRole(this))

		info(clearSkill(OutputDeviceCapacity))
		

		info("I uninstalled -------------------I")
		//unregisterBehavior(a)
		}
	on CommitSuicide {
		
		info("------------------------------------------------------------")

		unregisterBehavior(a)
		info(registeredBehaviors)
		unregisterBehavior(b)
		info(registeredBehaviors)

		
		clearSkill(OutputDeviceCapacity)
		info("I uninstalled -------------------A")

		
		killMe
		
		
	}
	on Destroy{
		info("The agent is destroyed")
	}
}
